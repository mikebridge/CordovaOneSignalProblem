!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["rxjs","rxjs/operators"],e):"object"==typeof exports?exports.CordovaPluginIoTizeNFC=e(require("rxjs"),require("rxjs/operators")):t.CordovaPluginIoTizeNFC=e(t.rxjs,t.rxjs.operators)}(window,function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(e,n){e.exports=t},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(9)),o(n(10))},function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r="@iotize:device-client.js",i=n(3);e.lazyDebug=function(t,e){i(r+":"+t)(e())},e.default=function(t){var e=o({},console);return e.debug=i(r+":"+t),e}},function(t,e,n){(function(o){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(o++,"%c"===t&&(r=o))}),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==o&&"env"in o&&(t=o.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(13)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(12))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.toByteBuffer=function(t){for(var e=new Uint8Array(t.length),n=0,o=t.length;n<o;n++)e[n]=t.charCodeAt(n);return e},t.toHexString=function(t){return t?Array.prototype.map.call(t,function(t){return("00"+t.toString(16)).slice(-2)}).join("").toUpperCase():""},t.toBinaryString=function(t){return Array.prototype.map.call(t,function(t){for(var e="",n=7;n>=0;n--)e+=(1<<n&t)>0?"1":"0";return e}).join("")},t.hexStringToBuffer=function(t){for(var e=new Uint8Array(Math.ceil(t.length/2)),n=0;n<e.length;n++)e[n]=parseInt(t.substr(2*n,2),16);return e},t.toAsciiString=function(t){return String.fromCharCode.apply(null,t)},t.toUnsignedInt=function(t,e,n){void 0===e&&(e=4),void 0===n&&(n=!0);var o=0;n&&(t=t.reverse());for(var r=0;r<t.length&&r<e;r++)o=(o<<8)+(255&t[r]);return o},t}();e.FormatHelper=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var o=t.call(this,n)||this;return o.code=e,o}return r(e,t),e.tagLostError=function(){return new e(e.ErrorCode.TagLostError,"NFC tag lost")},e.notConnectedError=function(){return new e(e.ErrorCode.NotConnectedError,"NFC tag is not connected")},e.unknownError=function(t){throw new e(e.ErrorCode.Unknown,t)},e.internalError=function(t){throw new e(e.ErrorCode.InternalError,t)},e}(Error);e.NfcError=i,function(t){!function(t){t.Unknown="NfcUnknownError",t.InternalError="NfcInternalError",t.TagLostError="NfcTagLostError",t.NotConnectedError="NfcNotConnectedError"}(t.ErrorCode||(t.ErrorCode={}))}(i=e.NfcError||(e.NfcError={})),e.NfcError=i},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n(7)),o(n(5)),o(n(20))},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),c=n(4),s=n(0),u=n(19),a=n(1),f=n(5),l=function(t){function e(e){void 0===e&&(e={connect:{timeout:2e3},disconnect:{timeout:1e3},send:{timeout:1e3}});var n=t.call(this)||this;return n.options=e,null==typeof nfc&&console.warn("NFC plugin has not been setup properly. Global variable NFC does not exist"),n}return r(e,t),e.iOSProtocol=function(){return new e({connect:{timeout:1e4},disconnect:{timeout:1e3},send:{timeout:1e3}})},e.prototype._connect=function(t){u.debug("_connect",t);var e=nfc.connect("android.nfc.tech.NfcV",this.options.connect.timeout);return s.from(e)},e.prototype._disconnect=function(t){return s.from(nfc.close())},e.prototype.write=function(t){throw new Error("Method not implemented.")},e.prototype.read=function(){throw new Error("Method not implemented.")},e.prototype.send=function(t,e){var n=this,o=nfc.transceive(c.FormatHelper.toHexString(t)).then(function(t){if("string"!=typeof t)throw f.NfcError.internalError("Internal error. Plugin should respond a hexadecimal string");return u.debug("NFC plugin response: ",t),c.FormatHelper.hexStringToBuffer(t)}).catch(function(t){if("string"==typeof t){var e=function(t){var e=t.toLowerCase();return e.indexOf("tag was lost")>=0?f.NfcError.tagLostError():e.indexOf("not connected")>=0?f.NfcError.notConnectedError():f.NfcError.unknownError(t)}(t);throw e.code!==f.NfcError.ErrorCode.NotConnectedError&&e.code!==f.NfcError.ErrorCode.TagLostError||n._onConnectionLost(e),e}throw t});return s.from(o)},e.prototype._onConnectionLost=function(t){this.connectionState!==a.ConnectionState.DISCONNECTED&&this.setConnectionState(a.ConnectionState.DISCONNECTED)},e}(i.QueueComProtocol);e.NFCComProtocol=l},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),c=n(0),s=n(11),u=n(15),a=n(2),f=n(17),l=n(18),p=a.default("ComProtocol"),d=function(t){function e(){var e=t.call(this)||this;return e._jobQueue=new l.TaskQueue,e}return r(e,t),e.prototype._send=function(t,e){var n=this;try{if(!this.isConnected()){var o=i.ComProtocol.Errors.notConnected({protocol:this});return c.throwError(o)}var r=new Date;return c.from(f.promiseTimeout(e.timeout,this.write(t),function(t){return i.ComProtocol.Errors.timeoutError({protocol:n,timeout:t.timeout,startTime:t.startTime})}).then(function(){var t=(new Date).getTime()-r.getTime(),o=e.timeout-t;return f.promiseTimeout(o,n.read())}))}catch(o){return c.throwError(o)}},e.prototype.cancel=function(){p.debug("Canceling operations"),this._jobQueue.cancelAll(i.ComProtocol.Errors.operationCanceled())},e.prototype.send=function(t,e){var n=this;return t=t.slice(0),this._jobQueue.addExecutor(function(){var o=e?e.timeout:n._options.send.timeout;return n._send(t,{timeout:o})})},e.prototype.connect=function(t){var e=this;return this.connectionState===i.ConnectionState.CONNECTED?(p.warn("QueueComProtocol is already connected"),c.of(null)):this.connectionState==i.ConnectionState.CONNECTING?this._connect$:(this._connect$=u.ObservableHelper.timeout(this._connect(t),t?t.timeout:this._options.connect.timeout),this.setConnectionState(i.ConnectionState.CONNECTING),this._connectionSubscription=this._connect$.subscribe(function(){e.setConnectionState(i.ConnectionState.CONNECTED)},function(t){e.setConnectionState(i.ConnectionState.DISCONNECTED)}),this._connect$)},e.prototype.disconnect=function(t){var e=this;return this.connectionState===i.ConnectionState.DISCONNECTED?c.of(null):this.connectionState==i.ConnectionState.DISCONNECTING?this._disconnect$:(this._connect$=void 0,this._disconnect$=u.ObservableHelper.timeout(this._disconnect(t),t?t.timeout:this._options.disconnect.timeout),this.setConnectionState(i.ConnectionState.DISCONNECTING),this._disconnect$.subscribe(function(){e.setConnectionState(i.ConnectionState.DISCONNECTED)},function(t){e.setConnectionState(i.ConnectionState.DISCONNECTED)}),this._disconnect$)},e}(s.AbstractComProtocol);e.QueueComProtocol=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e,n=function(t){function n(e,n){var o=t.call(this,n)||this;return o.code=e,o}return r(n,t),n.operationCanceled=function(){return new n(e.OperationCancelled,"Communication protocol operation cancelled")},n.notConnected=function(t){return new n(e.ProtocolNotConnected,"Communication protocol is not connected")},n.timeoutError=function(t){return new n(e.TimeoutError,"Communication protocol timeout")},n.unknownError=function(){return new n(e.UnknownError,"Unnown communication protocol error")},n}(Error);t.Errors=n,function(t){t.ProtocolNotConnected="ProtocolNotConnected",t.TimeoutError="TimeoutError",t.UnknownError="UnknownError",t.OperationCancelled="OperationCancelled"}(e=t.ErrorCode||(t.ErrorCode={}))}(e.ComProtocol||(e.ComProtocol={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.DISCONNECTING=3]="DISCONNECTING"}(e.ConnectionState||(e.ConnectionState={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(0),i=n(2).default("ComProtocol"),c=function(){function t(){this.connectionState=o.ConnectionState.DISCONNECTED,this._options={connect:{timeout:1e3},disconnect:{timeout:1e3},send:{timeout:500}}}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(t){this._options=t},enumerable:!0,configurable:!0}),t.prototype.getConnectionState=function(){return this.connectionState},t.prototype.isConnected=function(){return this.connectionState==o.ConnectionState.CONNECTED},t.prototype.setConnectionState=function(t){i.debug("setConnectionState",t,"Old: ",this.connectionState);var e={newState:t,oldState:this.connectionState};return this.connectionState=t,this._connectionStateChange&&this._connectionStateChange.next(e),this},t.prototype.receiveStream=function(){throw new Error("Method not implemented.")},t.prototype.onConnectionStateChange=function(){return this._connectionStateChange||(this._connectionStateChange=new r.Subject),this._connectionStateChange},t}();e.AbstractComProtocol=c},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(t){o=c}}();var u,a=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?a=u.concat(a):l=-1,a.length&&d())}function d(){if(!f){var t=s(p);f=!0;for(var e=a.length;e;){for(u=a,a=[];++l<e;)u&&u[l].run();l=-1,e=a.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function C(t,e){this.fun=t,this.array=e}function h(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new C(t,e)),1!==a.length||f||s(d)},C.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return o.colors[Math.abs(e)%o.colors.length]}function o(t){let n;function c(...t){if(!c.enabled)return;const e=c,r=Number(new Date),i=r-(n||r);e.diff=i,e.prev=n,e.curr=r,n=r,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return n;s++;const i=o.formatters[r];if("function"==typeof i){const o=t[s];n=i.call(e,o),t.splice(s,1),s--}return n}),o.formatArgs.call(e,t),(e.log||o.log).apply(e,t)}return c.namespace=t,c.enabled=o.enabled(t),c.useColors=o.useColors(),c.color=e(t),c.destroy=r,c.extend=i,"function"==typeof o.init&&o.init(c),o.instances.push(c),c}function r(){const t=o.instances.indexOf(this);return-1!==t&&(o.instances.splice(t,1),!0)}function i(t,e){const n=o(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function c(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(t){return t instanceof Error?t.stack||t.message:t},o.disable=function(){const t=[...o.names.map(c),...o.skips.map(c).map(t=>"-"+t)].join(",");return o.enable(""),t},o.enable=function(t){let e;o.save(t),o.names=[],o.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+t.substr(1)+"$")):o.names.push(new RegExp("^"+t+"$")));for(e=0;e<o.instances.length;e++){const t=o.instances[e];t.enabled=o.enabled(t.namespace)}},o.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=o.skips.length;e<n;e++)if(o.skips[e].test(t))return!1;for(e=0,n=o.names.length;e<n;e++)if(o.names[e].test(t))return!0;return!1},o.humanize=n(14),Object.keys(t).forEach(e=>{o[e]=t[e]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=e,o.enable(o.load()),o}},function(t,e){var n=1e3,o=60*n,r=60*o,i=24*r,c=7*i,s=365.25*i;function u(t,e,n,o){var r=e>=1.5*n;return Math.round(t/n)+" "+o+(r?"s":"")}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var u=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*c;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*o;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(t);if("number"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=i)return u(t,e,i,"day");if(e>=r)return u(t,e,r,"hour");if(e>=o)return u(t,e,o,"minute");if(e>=n)return u(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=i)return Math.round(t/i)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=o)return Math.round(t/o)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),r=function(){function t(){}return t.timeout=function(t,e){return e&&(t=t.pipe(o.timeout(e))),t},t}();e.ObservableHelper=r},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseTimeout=function(t,e,n){void 0===n&&(n=function(){return new Error("Timeout error")});var o=new Date;if(t<=0){var r=n({timeout:t,startTime:o});return Promise.reject(r)}var i=new Promise(function(e,r){var i=setTimeout(function(){clearTimeout(i);var e=n({timeout:t,startTime:o});r(e)},t)});return Promise.race([e,i])}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),c=n(2).default("JobQueue"),s=function(){function t(){this.tasks=[]}return Object.defineProperty(t.prototype,"workingState",{set:function(t){this._subscription=t,c.debug("state="+(void 0!==this._subscription?"WORKING":"IDLE")),void 0===this._subscription&&(this.processNext(),this.currentTask=void 0)},enumerable:!0,configurable:!0}),t.prototype.addExecutor=function(t){return this.addTask(new a(t))},t.prototype.addTask=function(t){return this.tasks.push(t),c.debug("addTask... total "+this.tasks.length),this.processNext(),t.toObservable()},t.prototype.cancelAll=function(t){this.currentTask&&this.currentTask.cancel(t);for(var e=this.tasks.shift();e;)e.cancel(t),e=this.tasks.shift()},t.prototype.processNext=function(){var t=this;if(void 0===this._subscription){var e=this.tasks.shift();if(e){c.debug("Processing next task... remaining "+this.tasks.length),this.currentTask=e;var n=!1,o=e.execute().subscribe({next:function(){c.debug("Task done successful!"),t.workingState=void 0,n=!0},error:function(){c.debug("Task done with error!"),t.workingState=void 0,n=!0}});n||(this.workingState=o)}}else c.debug("addTask... there is already a process running...")},t}();e.TaskQueue=s;var u=function(t){function e(e){var n=t.call(this,"Operation canceled")||this;return n.task=e,n.code="OperationCanceled",n}return r(e,t),e}(Error);e.TaskOperationCanceled=u;var a=function(){function t(t){this.operation=t,this._subject=new i.Subject,this._canceled=!1,this._executed=!1}return Object.defineProperty(t.prototype,"isCanceled",{get:function(){return this._canceled},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){if(!this._canceled){c.debug("Canceling operation"),this._canceled=!0;var e=t||new u(this);this._subject.error(e)}},t.prototype.execute=function(){var t=this;return this._executed||this._canceled||(this._executed=!0,c.debug("Start operation execution..."),this.operation().subscribe({next:function(e){c.debug("NEXT ",e),t._subject.next(e)},error:function(e){t._subject.error(e)},complete:function(){c.debug("COMPLETE! "),t._subject.complete()}})),this._subject},t.prototype.toObservable=function(){return this._subject},t}();e.CancelableTask=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);e.debug=o("@iotize/device-com-nfc.cordova")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(21))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(4);function i(t){return t.length>0&&0===t[0]&&(t=t.slice(1)),r.FormatHelper.toAsciiString(t)}e.parseTapNdefMessage=function(t){var e={};if(t.length>=1){var n=t[0].payload;e.uri=i(n)}if(t.length>=2&&(e.aar=i(t[1].payload)),t.length>=3){var r=t[2].payload,c=r[0],s=r.slice(1);switch(e.type=c,c){case o.BLE:e.macAddress=s.map(function(t){t<0&&(t+=256);var e="0"+t.toString(16).toUpperCase();return e=e.slice(-2)}).reverse().join(":");break;case o.WiFi:e.ssid=i(s)}}return t.length>=4&&(e.name=i(t[3].payload)),e},function(t){t[t.WiFi=32]="WiFi",t[t.BLE=64]="BLE"}(o||(o={}))}])});
//# sourceMappingURL=cordova-plugin-iotize-nfc.min.js.map